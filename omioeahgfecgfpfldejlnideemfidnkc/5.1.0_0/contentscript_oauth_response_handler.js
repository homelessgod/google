// Copyright 2014 Google Inc. All Rights Reserved.
(function(){var g=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b},h=function(a,b){function c(){}c.prototype=b.prototype;a.i=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.h=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};var k=function(a){if(Error.captureStackTrace)Error.captureStackTrace(this,k);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))};h(k,Error);k.prototype.name="CustomError";var l=function(a,b){a=a.split("%s");for(var c="",d=a.length-1,e=0;e<d;e++)c+=a[e]+(e<b.length?b[e]:"%s");k.call(this,c+a[d])};h(l,k);l.prototype.name="AssertionError";var m=function(a,b,c,d){var e="Assertion failed";if(c){e+=": "+c;var f=d}else a&&(e+=": "+a,f=b);throw new l(""+e,f||[]);},n=function(a,b,c){a||m("",null,b,Array.prototype.slice.call(arguments,2))},p=function(a,b,c){"number"==typeof a||m("Expected number but got %s: %s.",[g(a),a],b,Array.prototype.slice.call(arguments,2));return a};var q=Array.prototype.forEach?function(a,b,c){n(null!=a.length);Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e="string"==typeof a?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},r=function(a){return Array.prototype.concat.apply([],arguments)};var t=function(a,b){this.b={};this.a=[];this.c=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a)if(a instanceof t)for(c=a.g(),d=0;d<c.length;d++)this.set(c[d],a.get(c[d]));else for(d in a)this.set(d,a[d])};t.prototype.f=function(){u(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a};t.prototype.g=function(){u(this);return this.a.concat()};
t.prototype.clear=function(){this.b={};this.c=this.a.length=0};t.prototype.remove=function(a){return w(this.b,a)?(delete this.b[a],this.c--,this.a.length>2*this.c&&u(this),!0):!1};var u=function(a){if(a.c!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];w(a.b,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.c!=a.a.length){var e={};for(c=b=0;b<a.a.length;)d=a.a[b],w(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}};t.prototype.get=function(a,b){return w(this.b,a)?this.b[a]:b};
t.prototype.set=function(a,b){w(this.b,a)||(this.c++,this.a.push(a));this.b[a]=b};t.prototype.forEach=function(a,b){for(var c=this.g(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};var w=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};var x=function(a,b){if(a){a=a.split("&");for(var c=0;c<a.length;c++){var d=a[c].indexOf("="),e=null;if(0<=d){var f=a[c].substring(0,d);e=a[c].substring(d+1)}else f=a[c];b(f,e?decodeURIComponent(e.replace(/\+/g," ")):"")}}},y=/#|$/,A=function(a){var b=z,c=b.search(y);a:{var d=0;for(var e=a.length;0<=(d=b.indexOf(a,d))&&d<c;){var f=b.charCodeAt(d-1);if(38==f||63==f)if(f=b.charCodeAt(d+e),!f||61==f||38==f||35==f)break a;d+=e+1}d=-1}if(0>d)return null;e=b.indexOf("&",d);if(0>e||e>c)e=c;d+=a.length+1;
return decodeURIComponent(b.substr(d,e-d).replace(/\+/g," "))};var D=function(){var a=B[C];this.b=this.a=null;this.c=a||null},E=function(a){a.a||(a.a=new t,a.b=0,a.c&&x(a.c,function(b,c){a.add(decodeURIComponent(b.replace(/\+/g," ")),c)}))};D.prototype.add=function(a,b){E(this);this.c=null;a=String(a);var c=this.a.get(a);c||this.a.set(a,c=[]);c.push(b);this.b=p(this.b)+1;return this};D.prototype.remove=function(a){E(this);a=String(a);return w(this.a.b,a)?(this.c=null,this.b=p(this.b)-this.a.get(a).length,this.a.remove(a)):!1};
D.prototype.clear=function(){this.a=this.c=null;this.b=0};var F=function(a,b){E(a);b=String(b);return w(a.a.b,b)};D.prototype.forEach=function(a,b){E(this);this.a.forEach(function(c,d){q(c,function(c){a.call(b,c,d,this)},this)},this)};D.prototype.g=function(){E(this);for(var a=this.a.f(),b=this.a.g(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};
D.prototype.f=function(a){E(this);var b=[];if("string"==typeof a)F(this,a)&&(b=r(b,this.a.get(String(a))));else{a=this.a.f();for(var c=0;c<a.length;c++)b=r(b,a[c])}return b};D.prototype.set=function(a,b){E(this);this.c=null;a=String(a);F(this,a)&&(this.b=p(this.b)-this.a.get(a).length);this.a.set(a,[b]);this.b=p(this.b)+1;return this};D.prototype.get=function(a,b){if(!a)return b;a=this.f(a);return 0<a.length?String(a[0]):b};
D.prototype.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var a=[],b=this.a.g(),c=0;c<b.length;c++){var d=b[c],e=encodeURIComponent(String(d));d=this.f(d);for(var f=0;f<d.length;f++){var v=e;""!==d[f]&&(v+="="+encodeURIComponent(String(d[f])));a.push(v)}}return this.c=a.join("&")};var G,z=document.URL,H=A("approvalCode");if(!(G=H?H:"error=access_denied"==A("response")?"access_denied":null))a:{for(var B=document.title.split(/\s/),C=0;C<B.length;C++){var I=new D;if(F(I,"code")){G=I.get("code");break a}}G=null}chrome.extension.sendMessage({command:"set_code",code:G});})();
