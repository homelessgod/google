!function(n){var r={};function a(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=n,a.c=r,a.d=function(exports,e,t){a.o(exports,e)||Object.defineProperty(exports,e,{enumerable:!0,get:t})},a.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=267)}({1:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default={isRecording:"isRecording",startRecording:"startRecording",reviewRecording:"reviewRecording",getRecording:"getRecording",addNewSnapshot:"addNewSnapshot",trashRecording:"trashRecording",saveLastPopup:"saveLastPopup",loadPopupState:"loadPopupState",initMonitor:"initMonitor",configureMonitor:"configureMonitor",stopMonitor:"stopMonitor"}},2:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(e){u(this,t),this.name=e,this.commands=[],this.sanityChecks=[]}return n(t,[{key:"addCommand",value:function(e){this.commands.push(e)}},{key:"addManyCommand",value:function(e){var t;(t=this.commands).push.apply(t,a(e))}},{key:"addSanityCheck",value:function(e){this.sanityChecks.push(e)}},{key:"addManySanityCheck",value:function(e){var t;(t=this.sanityChecks).push.apply(t,a(e))}},{key:"toJSON",value:function(){return{Type:"Trail",Version:"4.0",CreationDate:(e=new Date,t=function(e){return e<10?"0"+e:""+e},e.getFullYear()+"-"+t(e.getMonth())+"-"+t(e.getDate())),Name:this.name,Commands:this.commands,SanityChecks:this.sanityChecks};var e,t}}]),t}(),s=function(){function s(e,t,n,r,a,i,o){u(this,s),this.title=n,this.type=e,this.version=t,this.command=r,this.target=a,this.value=i,this.args=!!Array.isArray(o)&&o}return n(s,[{key:"toJSON",value:function(){var e={Type:this.type,Version:this.version,Command:this.command,Target:this.target,Value:this.value,Title:this.title};return!1!==this.args&&(e.Arguments=this.args),e}}]),s}(),c=function(e){function a(){return u(this,a),r(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return o(a,s),n(a,null,[{key:"_create",value:function(e,t,n,r){return new a("Selenium","1.0",e,t,n,r)}},{key:"createOpenCommand",value:function(e){return this._create("Browse to","open",e,"")}},{key:"createClickCommand",value:function(e){return this._create("Click on","click","css="+e,"")}},{key:"createClickAndWaitCommand",value:function(e){return this._create("Click on and wait","clickAndWait","css="+e,"")}},{key:"createWaitForPageToLoadCommand",value:function(e){return this._create("Wait for page to load","waitForPageToLoad",e,"")}},{key:"createWaitForElementPresentCommand",value:function(e){return this._create("Wait for element to be present","waitForElementPresent","css="+e,"")}},{key:"createVerifyTextPresentCommand",value:function(e){return this._create("Verify text exists","verifyTextPresent",e,"")}},{key:"createAssertTextPresentCommand",value:function(e){return this.createVerifyTextPresentCommand(e)}},{key:"createVerifyElementPresentCommand",value:function(e){return this._create("Verify element exists","verifyElementPresent","css="+e,"")}},{key:"createAssertElementPresentCommand",value:function(e){return this.createVerifyElementPresentCommand(e)}},{key:"createVerifyTextCommand",value:function(e,t){return this._create("Verify text of","verifyText","css="+e,t)}},{key:"createAssertTextCommand",value:function(e,t){return this.createVerifyTextCommand(e,t)}},{key:"createVerifyTitleCommand",value:function(e){return this._create("Verify title of page","verifyTitle",e,"")}},{key:"createAssertTitleCommand",value:function(e){return this.createVerifyTitleCommand(e)}},{key:"createVerifyURLCommand",value:function(e){return this._create("Verify url of page","verifyURL",e,"")}},{key:"createAssertURLCommand",value:function(e){return this.createVerifyURLCommand(e)}},{key:"createTypeCommand",value:function(e,t){return this._create("Type in","type","css="+e,t)}},{key:"createRunScriptCommand",value:function(e){return this._create("Run script","runScript",e,"")}}]),a}(),l=function(e){function i(){return u(this,i),r(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return o(i,s),n(i,null,[{key:"_create",value:function(e,t,n,r,a){return new i("UserAction","1.0",e,t,n,r,a||[])}},{key:"createTypeCommand",value:function(e,t,n){return this._create("Type in","type","css="+e,n,["xpath="+t])}},{key:"createChangeTabFocusCommand",value:function(e){return this._create("Change tab to","tabFocus",e,"")}},{key:"createMouseClickCommand",value:function(e,t){return this._create("Click on","mouseClick","css="+e,"xpath="+t)}},{key:"createMouseDownCommand",value:function(e,t){return this._create("Mouse button down","mouseDown","css="+e,"xpath="+t)}},{key:"createMouseUpCommand",value:function(e,t){return this._create("Mouse button up","mouseUp","css="+e,"xpath="+t)}},{key:"createKeyPressCommand",value:function(e,t,n,r,a,i){return this._create("Key press","keyPress","css="+e,"xpath="+t,[n,r,a,i])}},{key:"createKeyDownCommand",value:function(e,t,n,r,a,i){return this._create("Key press","keyDown","css="+e,"xpath="+t,[n,r,a,i])}},{key:"createKeyUpCommand",value:function(e,t,n,r,a,i){return this._create("Key up","keyUp","css="+e,"xpath="+t,[n,r,a,i])}},{key:"createFocusCommand",value:function(e,t){return this._create("Focus on","focus","css="+e,"xpath="+t)}},{key:"createBlurCommand",value:function(e,t){return this._create("Lose focus from","blur","css="+e,"xpath="+t)}},{key:"createInputCommand",value:function(e,t){return this._create("Type in","input","css="+e,t)}},{key:"createScrollCommand",value:function(e,t){return this._create("Scroll to","scroll",e,t)}},{key:"createSetViewportCommand",value:function(e,t){return this._create("Set screen size","setViewport",e,t)}}]),i}(),d=function(e){function a(){return u(this,a),r(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return o(a,s),n(a,null,[{key:"_create",value:function(e,t,n,r){return new a("Helper","1.0",e,t,n,r)}},{key:"createLogCommand",value:function(e){return this._create("Write to log","log",e,"")}},{key:"createSleepCommand",value:function(e){return this._create("Wait for","sleep",e.toString(),"")}}]),a}(),f=function(e){function a(){return u(this,a),r(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return o(a,s),n(a,null,[{key:"_create",value:function(e,t,n,r){return new a("Extractor","1.0",e,t,n,r)}},{key:"createExtractCookieCommand",value:function(e){return this._create("Extract cookie","cookie",e,"")}},{key:"createExtractCookiesCommand",value:function(){return this._create("Extract all cookies","cookies","","")}},{key:"createExtractLinksCommand",value:function(e){return this._create("Extract links","links","css="+e,"")}},{key:"createExtractAllLinksCommand",value:function(){return this._create("Extract all links","links","","")}},{key:"createExtractURLCommand",value:function(){return this._create("Extract url","url","","")}},{key:"createExtractScreenshotCommand",value:function(){return this._create("Take screenshot","screenshot","","")}}]),a}();exports.Trail=i,exports.TrailCommand=s,exports.TrailSeleniumCommand=c,exports.TrailUserActionCommand=l,exports.TrailHelperCommand=d,exports.TrailExtractorCommand=f,exports.createMetaCommand=function(e,t,n){return n=n||{},e._identifier=(t||"0").toString(),e._tag=n.tagName||!1,e._screenShotIdentifier=n.screenShotIdentifier||"",e._scrollInfo=n.scroll||{scrollX:0,scrollY:0},e._timeStamp=n.timeStamp||0,e._location=n.location||!1,e._sensitiveValue=n.sensitiveValue||!1,e._stripFromOutput=n.stripFromOutput||!1,e._causedByNavigation=n.causedByNavigation||!1,e}},267:function(e,exports,t){"use strict";var n=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),r=a(t(268)),u=a(t(1));function a(e){return e&&e.__esModule?e:{default:e}}var i=function(){function e(){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._handleNewSnapshop=function(e,t,n,r,a,i,o){chrome.runtime.sendMessage({action:u.default.addNewSnapshot,snapshot:t,scroll:n,takeScreenShot:r||!1,tagName:a||!1,timeStamp:i,sensitiveValue:o,sessionIdentifier:s._sessionIdentifier,tabUUID:s._uuid})},this._handleOnMessage=function(e,t,n){switch(e.action){case u.default.stopMonitor:s._deActivate();break;case u.default.configureMonitor:s._configure(e.identifier)}n()},this.DOMRecorder=new r.default,this.DOMRecorder.on("newSnapshot",this._handleNewSnapshop),this._uuid=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}),this._sessionIdentifier=null,chrome.runtime.onMessage.addListener(this._handleOnMessage),chrome.runtime.sendMessage({action:u.default.initMonitor,timeStamp:Math.floor((new Date).getTime()).toString(),url:document.location.href},function(e){s._configure(e.identifier),e.recording&&s.DOMRecorder.start()})}return n(e,[{key:"_deActivate",value:function(){this.DOMRecorder.stop()}},{key:"_configure",value:function(e){this._sessionIdentifier=e}}]),e}();!0!==window._____________dtfy_injected&&(new i,window._____________dtfy_injected=!0)},268:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=t(2),o=t(269),s=(n=o)&&n.__esModule?n:{default:n};var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state={isRecording:!1,recordingMeta:{started:0,stopped:0},eventHandlers:{mouse:null,keyboard:null,input:null}},this.hooks={},this.uuid="",this.focusedCount=0,this.keyIdentifierSuffix=0,this.keyState={}}return a(e,[{key:"start",value:function(){if(!1===this.isRecording()){this._removeEventListeners(),this.state.isRecording=!0,this.focusedCount=0,this.keyState={},this.keyIdentifierSuffix=0,this.uuid=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}),this.state.recordingMeta.started=(new Date).getTime(),this.state.eventHandlers.mouse=this._handleNewEvent.bind(this),this.state.eventHandlers.keyboard=this._handleNewEvent.bind(this),this.state.eventHandlers.input=this._handleNewEvent.bind(this);var e=void 0;for(e in y.mouse)window.addEventListener(y.mouse[e],this.state.eventHandlers.mouse,!0);for(e in y.keyboard)window.addEventListener(y.keyboard[e],this.state.eventHandlers.keyboard,!0);for(e in y.input)window.addEventListener(y.input[e],this.state.eventHandlers.input,!0)}}},{key:"stop",value:function(){this.isRecording()&&(this._removeEventListeners(),this.state.isRecording=!1)}},{key:"isRecording",value:function(){return this.state.isRecording}},{key:"reset",value:function(){this.stop()}},{key:"on",value:function(e,t){this.hooks[e]=t}},{key:"_emit",value:function(e){this.hooks.hasOwnProperty(e)&&"function"==typeof this.hooks[e]&&this.hooks[e].apply(this,arguments)}},{key:"_removeEventListeners",value:function(){var e=void 0;for(e in y.mouse)null!==this.state.eventHandlers.mouse&&window.removeEventListener(y.mouse[e],this.state.eventHandlers.mouse,!0);for(e in y.keyboard)null!==this.state.eventHandlers.keyboard&&window.removeEventListener(y.keyboard[e],this.state.eventHandlers.keyboard,!0);for(e in y.input)null!==this.state.eventHandlers.input&&window.removeEventListener(y.input[e],this.state.eventHandlers.input,!0)}},{key:"_parseCommand",value:function(e){if(e instanceof MouseEvent){switch(e.type){case"click":return i.TrailUserActionCommand.createMouseClickCommand(s.default.cssPath(e.target),s.default.xPath(e.target)).toJSON();case"mousedown":return i.TrailUserActionCommand.createMouseDownCommand(s.default.cssPath(e.target),s.default.xPath(e.target)).toJSON();case"mouseup":return i.TrailUserActionCommand.createMouseUpCommand(s.default.cssPath(e.target),s.default.xPath(e.target)).toJSON()}return null}if(e instanceof KeyboardEvent){if(-1===l.indexOf(e.target?e.target.tagName:""))switch(e.type){case"keyup":var t=this.keyState[e.key]||this.uuid+"-"+-1*this.keyIdentifierSuffix;return delete this.keyState[e.key],r(i.TrailUserActionCommand.createKeyUpCommand(s.default.cssPath(e.target),s.default.xPath(e.target),e.keyCode.toString(),e.key,e.code,0<e.charCode?e.key:"").toJSON(),{_keyIdentifier:t});case"keypress":return r(i.TrailUserActionCommand.createKeyPressCommand(s.default.cssPath(e.target),s.default.xPath(e.target),e.keyCode.toString(),e.key,e.code,0<e.charCode?e.key:"").toJSON(),{_keyIdentifier:this.keyState[e.key]||this.uuid+"-"+-1*this.keyIdentifierSuffix});case"keydown":return this.keyIdentifierSuffix++,this.keyState[e.key]=this.uuid+"-"+this.keyIdentifierSuffix,r(i.TrailUserActionCommand.createKeyDownCommand(s.default.cssPath(e.target),s.default.xPath(e.target),e.keyCode.toString(),e.key,e.code,0<e.charCode?e.key:"").toJSON(),{_keyIdentifier:this.keyState[e.key]})}return null}if(e instanceof FocusEvent){if(e.target&&-1<d.indexOf(e.target.tagName))switch(e.type){case"focus":return i.TrailUserActionCommand.createFocusCommand(s.default.cssPath(e.target),s.default.xPath(e.target)).toJSON();case"blur":return i.TrailUserActionCommand.createBlurCommand(s.default.cssPath(e.target),s.default.xPath(e.target)).toJSON()}return null}if("input"===e.type&&-1===f.indexOf(e.target.type.toUpperCase())){if("SELECT"!==e.target.tagName)return i.TrailUserActionCommand.createTypeCommand(s.default.cssPath(e.target),s.default.xPath(e.target),e.target.value).toJSON();var n=e.target.options[e.target.selectedIndex]||!1;if(n)return i.TrailUserActionCommand.createMouseClickCommand(s.default.cssPath(n),s.default.xPath(n)).toJSON();console.log("Unable to find option for select")}return null}},{key:"_handleNewEvent",value:function(e){var t=this._parseCommand(e);if(null!=t){"focus"===e.type&&this.focusedCount++;var n=e.target.getBoundingClientRect();this._emit("newSnapshot",t,{scrollX:window.scrollX,scrollY:window.scrollY},!!(e.target&&-1<h.indexOf(e.target.tagName)&&-1<m.indexOf(e.type)&&n&&n.width<1e3&&n.height<1e3)&&{x:n.x*window.devicePixelRatio,y:n.y*window.devicePixelRatio,width:n.width,height:n.height,elementIdentifier:this.focusedCount+"-"+s.default.cssPath(e.target)},!(!e.target||!e.target.tagName)&&c(e.target),(new Date).getTime().toString(),e.target&&"INPUT"===e.target.tagName&&"password"===e.target.type.toString().toLowerCase())}}}]),e}();exports.default=u;var c=function(e){return{name:e.tagName,attributes:Array.prototype.slice.call(e.attributes).map(function(e){return[e.nodeName,e.value||e.text]})}},l=["INPUT","TEXTAREA","OPTION","SELECT"],d=["INPUT","TEXTAREA","SELECT"],f=["CHECKBOX","RADIO"],h=["INPUT","TEXTAREA","BUTTON","A","SELECT","DIV"],m=["click","input"],y={mouse:["click"],keyboard:["keydown","keypress","keyup"],input:["input","focus","blur"]}},269:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(){a(this,e)}return r(e,null,[{key:"xPath",value:function(e,t){if(e.nodeType===Node.DOCUMENT_NODE)return"/";for(var n=[],r=e;r;){var a=this._xPathValue(r,t);if(!a)break;if(n.push(a),a.optimized)break;r=r.parentNode}return n.reverse(),(n.length&&n[0].optimized?"":"/")+n.join("/")}},{key:"cssPath",value:function(e,t){if(e.nodeType!==Node.ELEMENT_NODE)return"";for(var n=[],r=e;r;){var a=this._cssPathStep(r,!!t,r===e);if(!a)break;if(n.push(a),a.optimized)break;r=r.parentNode}return n.reverse(),n.join(" > ")}},{key:"_cssPathStep",value:function(e,t,n){if(e.nodeType!==Node.ELEMENT_NODE)return null;var r=e.getAttribute("id");if(t){if(r)return new E(u(r),!0);var a=e.nodeName.toLowerCase();if("body"===a||"head"===a||"html"===a)return new E(e.nodeName.toLowerCase(),!0)}var i=e.nodeName.toLowerCase();if(r)return new E(i+u(r),!0);var o=e.parentNode;if(!o||o.nodeType===Node.DOCUMENT_NODE)return new E(i,!0);function s(e){var t=e.getAttribute("class");return t?t.split(/\s+/g).filter(Boolean).map(function(e){return"$"+e}):[]}function u(e){return"#"+c(e)}function c(e){if(/^-?[a-zA-Z_][a-zA-Z0-9_-]*$/.test(e))return e;var i=/^(?:[0-9]|-[0-9-]?)/.test(e),o=e.length-1;return e.replace(/./g,function(e,t){return i&&0===t||!(/[a-zA-Z0-9_-]/.test(a=e)||160<=a.charCodeAt(0))?(r=t===o,"\\"+(1===(n=e.charCodeAt(0).toString(16)).length&&(n="0"+n),n)+(r?"":" ")):e;var n,r,a})}for(var l=s(e),d=!1,f=!1,h=-1,m=o.children,y=0;(-1===h||!f)&&y<m.length;++y){var p=m[y];if(p.nodeType===Node.ELEMENT_NODE)if(1,p!==e){if(!f&&p.nodeName.toLowerCase()===i.toLowerCase()){d=!0;var v=l.keySet,_=0;for(var k in v)++_;if(0!==_)for(var g=s(p),C=0;C<g.length;++C){var T=g[C];if(v.hasOwnProperty(T)&&(delete v[T],!--_)){f=!0;break}}else f=!0}}else h=y}var w=i.toLowerCase();if(n&&"input"===i.toLowerCase()&&e.getAttribute("type")&&!e.getAttribute("id")&&!e.getAttribute("class")&&(w+='[type="'+e.getAttribute("type")+'"]'),f)w+=":nth-child("+(h+1)+")";else if(d)for(var N in l)w+="."+c(l[N].substr(1));return new E(w,!1)}},{key:"_xPathValue",value:function(e,t){var n,r=this._xPathIndex(e);if(-1===r)return null;switch(e.nodeType){case Node.ELEMENT_NODE:if(t&&e.getAttribute("id"))return new E('//*[@id="'+e.getAttribute("id")+'"]',!0);n=e.localName;break;case Node.ATTRIBUTE_NODE:n="@"+e.nodeName;break;case Node.TEXT_NODE:case Node.CDATA_SECTION_NODE:n="text()";break;case Node.PROCESSING_INSTRUCTION_NODE:n="processing-instruction()";break;case Node.COMMENT_NODE:n="comment()";break;case Node.DOCUMENT_NODE:default:n=""}return 0<r&&(n+="["+r+"]"),new E(n,e.nodeType===Node.DOCUMENT_NODE)}},{key:"_xPathIndex",value:function(e){function t(e,t){return e===t||(e.nodeType===Node.ELEMENT_NODE&&t.nodeType===Node.ELEMENT_NODE?e.localName===t.localName:e.nodeType===t.nodeType||(e.nodeType===Node.CDATA_SECTION_NODE?Node.TEXT_NODE:e.nodeType)===(t.nodeType===Node.CDATA_SECTION_NODE?Node.TEXT_NODE:t.nodeType))}var n,r=e.parentNode?e.parentNode.children:null;if(!r)return 0;for(var a=0;a<r.length;++a)if(t(e,r[a])&&r[a]!==e){n=!0;break}if(!n)return 0;var i=1;for(a=0;a<r.length;++a)if(t(e,r[a])){if(r[a]===e)return i;++i}return-1}}]),e}();exports.default=n;var E=function(){function n(e,t){a(this,n),this.value=e,this.optimized=t||!1}return r(n,[{key:"toString",value:function(){return this.value}}]),n}()}});